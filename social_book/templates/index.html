{% extends 'main.html' %}
{% block content %}
    <div class="container my-5">
        <div class="row ">
            <div class="col-md-6 offset-md-1 " >
                {% if posts.count == 0 %}
                <div class="bg-light d-flex justify-content-center align-content-center shadow p-3 mb-5 bg-white rounded"><h2>no posts shared</h2></div>
                {%else%}
                {% for post in posts %}
                <div class="bg-white rounded pb-3 mb-5">
                    <div class="d-flex justify-content-between bg-white rounded-top align-items-center p-3 ">
                            <div class="d-flex justify-content-center rounded-top align-items-center grid gap-2">
                                <a href="{% url 'profile' post.user.id %}" class="text-decoration-none text-dark">
                                    <img src="{{post.user.avatar.url}}" class="rounded-circle" width="40" height="40" alt="">
                                    <span class="">@{{post.user}}</span>
                                </a>
                            </div>
                            <div>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots mb-1" viewBox="0 0 16 16">
                                    <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                                </svg>
                            </div>
                    </div>
                    <div class="" >
                        <a href="{{post.image.url}}">
                            <img src="{{post.image.url}}" class="img-fluid w-100" style="height: 500px;"  alt="">
                        </a>
                    </div>
                    <div class="d-flex justify-content-between bg-white rounded-top align-items-center p-3 ">
                        <div class="d-flex justify-content-center rounded-top align-items-center grid gap-3">
                            <a href="{% url 'like-post' post.id %}" class="text-decoration-none text-dark">
                                <i class="bi bi-heart fs-4"></i>
                            </a>
                        </div>
                        <div>
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-save2" viewBox="0 0 16 16">
                                <path d="M2 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9.5a1 1 0 0 0-1 1v4.5h2a.5.5 0 0 1 .354.854l-2.5 2.5a.5.5 0 0 1-.708 0l-2.5-2.5A.5.5 0 0 1 5.5 6.5h2V2a2 2 0 0 1 2-2H14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h2.5a.5.5 0 0 1 0 1H2z"/>
                            </svg>
                        </div>
                    </div>
                    <div class="ms-3">
                        <div>
                            {% if post.no_of_likes == 0 %}
                                <p>No likes</p>
                            {% else %}
                                <p class="m-0">Liked by {{post.no_of_likes}} person</p>
                            {% endif %}
                        </div>
                        {% for like in likes %}
                            
                            {% if like.post.id == post.id %}
                                <img src="{{like.user.avatar.url}}" width="20" height="20" alt="">
                            {% endif %}
                            
                        {% endfor %}
                      
                    </div>
                    <hr class="">
                    <div class="d-flex align-items-center ms-3  my-3">
                        <img src="{{post.user.avatar.url}}" class="rounded-circle " width="35" height="35" alt="">
                        <div class="ms-2">
                            <a href="" class="text-decoration-none text-dark"><strong class="m-0 ">{{post.user}}</strong></a>
                            <p class=" m-0 rounded-5" >{{post.caption}}</p>
                        </div>
                        
                    </div>
                    <hr class="p-3">
                    <div class="d-flex justify-content-between mx-2 rounded-5 " style="background-color: rgb(212, 210, 210);">
                        <form action="" class="w-75 ">
                            <input type="search w-75" class="form-control rounded-5 ps-3 border-0" placeholder="post a comment" style=" background-color: rgb(212, 210, 210);">
                        </form>
                        <div class="d-flex align-items-center grid gap-3 me-3">
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-card-image" viewBox="0 0 16 16">
                                <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                                <path d="M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12v.54A.505.505 0 0 1 1 12.5v-9a.5.5 0 0 1 .5-.5h13z"/>
                              </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-camera-video" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M0 5a2 2 0 0 1 2-2h7.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 4.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 13H2a2 2 0 0 1-2-2V5zm11.5 5.175 3.5 1.556V4.269l-3.5 1.556v4.35zM2 4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h7.5a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1H2z"/>
                              </svg>
                        </div>
                    </div>
                    
                </div>
                {% endfor %}
                {% endif %}
            </div>
            <div class="col-md-4 offset-md-1 ">
                <div class="bg-white rounded">
                    <div class="d-flex justify-content-between align-items-center pt-1 px-2 rounded-top" style="background-color: rgb(235, 237, 237)">
                        <h5 class="p-2">Users You Can Follow </h5>
                    </div>
                    {% for item in takip_etmediklerim %}
                        <div class="d-flex justify-content-between align-items-center pt-1 px-2">
                            <div class="d-flex align-items-center">
                                <a href="{% url 'profile' item.kullanici.id %}" class="d-flex align-items-center text-decoration-none text-dark">
                                    <img src="{{ item.kullanici.avatar.url }}" width="40" height="40" alt="">
                                    <div class="ms-3">
                                        <h6 class="p-0 m-0">{{ item.kullanici.username }}</h6>
                                        <small>Takip√ßiler: {{ item.takipci_sayisi }}</small>
                                    </div>
                                </a>
                            </div>
                            <p class="text-center mt-2 btn border">
                                <a href="{% url 'follow' item.kullanici.id %}" class="text-decoration-none text-dark">Follow</a>
                            </p>
                        </div>
                    {% endfor %}

                </div>
            </div>
        </div>
    </div>
{% endblock  %}