{% extends 'main.html' %}
{% block content %}
<div class="row g-0 g-lg-4">
  <!-- LEFT SIDEBAR -->
  <div class="col-lg-3 d-none d-lg-flex flex-column">
    <div class="left-sidebar sticky-sidebar">
      <div class="sidebar-logo mb-4"><a href="{% url 'index' %}" class="text-decoration-none"><span class="fw-bold fs-3"
            style="color:var(--primary);letter-spacing:-1px;">CLiQ</span></a></div>
      <nav class="d-flex flex-column gap-1 mb-4">
        <a href="{% url 'index' %}" class="sidebar-nav-link"><i class="bi bi-house-door-fill"></i> Home</a>
        <a href="{% url 'profile' request.user.id %}" class="sidebar-nav-link"><i class="bi bi-person-circle"></i>
          Profile</a>
        <a href="{% url 'chat' %}" class="sidebar-nav-link"><i class="bi bi-chat-dots-fill"></i> Messages</a>
        <a href="{% url 'settings' %}" class="sidebar-nav-link"><i class="bi bi-gear-fill"></i> Settings</a>
        <a href="{% url 'logout' %}" class="sidebar-nav-link text-danger"><i class="bi bi-box-arrow-right"></i> Log
          Out</a>
      </nav>
    </div>
  </div>

  <!-- SEARCH RESULTS -->
  <div class="col-lg-6">
    <h5 class="fw-bold mb-4 mt-2">Search Results</h5>
    {% if users_filter.all.count == 0 %}
    <div class="modern-card p-5 text-center">
      <i class="bi bi-person-slash text-muted display-4 mb-3"></i>
      <h5 class="fw-bold">No users found</h5>
      <p class="text-muted small">Try a different username.</p>
    </div>
    {% else %}
    <div class="d-flex flex-column gap-3">
      {% for user_filter in users_filter %}
      <a href="{% url 'profile' user_filter.id %}" class="text-decoration-none">
        <div class="modern-card p-3 d-flex align-items-center gap-3 search-result-row">
          <div class="avatar-ring flex-shrink-0"><img src="{{ user_filter.avatar.url }}" width="54" height="54"
              class="avatar-img"></div>
          <div class="flex-grow-1">
            <span class="fw-bold text-dark d-block">@{{ user_filter.username }}</span>
            <small class="text-muted">{{ user_filter.email }}</small>
            {% if user_filter.bio %}<p class="small text-secondary m-0 mt-1">{{ user_filter.bio|truncatechars:50 }}</p>
            {% endif %}
          </div>
          <i class="bi bi-chevron-right text-muted"></i>
        </div>
      </a>
      {% endfor %}
    </div>
    {% endif %}
  </div>
</div>
<style>
  .search-result-row {
    transition: box-shadow 0.2s, transform 0.2s;
  }

  .search-result-row:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg) !important;
  }
</style>
{% endblock %}